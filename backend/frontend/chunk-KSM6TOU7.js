import{a as R,b as G,c as L,d as V,e as z,f as B}from"./chunk-7DAXQFX5.js";import"./chunk-AZKZJRRS.js";import{b as O}from"./chunk-TEHJRAAM.js";import{b as N,c as C,e as D,f as T,h as j,j as q,k as U,l as $,m as A}from"./chunk-LIAZ27XT.js";import"./chunk-JYTUQL2Z.js";import{a as F}from"./chunk-N2VS3P45.js";import{e as P,f as k}from"./chunk-G3XZPYES.js";import"./chunk-Q6FBKUVX.js";import"./chunk-WXI33M2S.js";import{Bb as y,Cb as I,Lb as a,Qb as M,Ra as d,Rb as E,d as u,da as f,e as h,f as x,fa as v,jb as b,lb as _,pb as g,tb as n,ub as o,vb as w}from"./chunk-BYU4RTY2.js";var p=class extends Error{};p.prototype.name="InvalidTokenError";function H(t){return decodeURIComponent(atob(t).replace(/(.)/g,(e,i)=>{let r=i.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r}))}function K(t){let e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return H(e)}catch{return atob(e)}}function J(t,e){if(typeof t!="string")throw new p("Invalid token specified: must be a string");e||(e={});let i=e.header===!0?0:1,r=t.split(".")[i];if(typeof r!="string")throw new p(`Invalid token specified: missing part #${i+1}`);let l;try{l=K(r)}catch(S){throw new p(`Invalid token specified: invalid base64 for part #${i+1} (${S.message})`)}try{return JSON.parse(l)}catch(S){throw new p(`Invalid token specified: invalid json for part #${i+1} (${S.message})`)}}var Q=()=>["","signup"];function W(t,e){t&1&&(n(0,"mat-error"),a(1,"Please enter a valid email address"),o())}function X(t,e){t&1&&(n(0,"mat-error"),a(1,"Email is "),n(2,"strong"),a(3,"required"),o()())}function Y(t,e){if(t&1&&b(0,W,2,0,"mat-error")(1,X,4,0,"mat-error"),t&2){let i=I();g(i.email.errors!=null&&i.email.errors.email?0:-1),d(),g(i.email.errors!=null&&i.email.errors.required?1:-1)}}function Z(t,e){t&1&&(n(0,"mat-error"),a(1,"Password is "),n(2,"strong"),a(3,"required"),o()())}var ge=(()=>{var e,i,r;let l=class l{constructor(){h(this,e);h(this,i);h(this,r);x(this,e,f(O)),x(this,i,f(F)),x(this,r,f(P)),this.form=f($).nonNullable.group({email:["",[C.required,C.email]],password:["",C.required]})}get email(){return this.form.controls.email}get password(){return this.form.controls.password}signIn(){u(this,e).signIn(this.form.value).subscribe({next:c=>{if(c.success){let m=J(c.data);u(this,e).$state.set({_id:m._id,fullname:m.fullname,email:m.email,jwt:c.data}),u(this,r).navigate(["","medicines"])}},error:c=>{u(this,i).error("Invalid Useername or Password")}})}};e=new WeakMap,i=new WeakMap,r=new WeakMap,l.\u0275fac=function(m){return new(m||l)},l.\u0275cmp=v({type:l,selectors:[["app-sign-in"]],standalone:!0,features:[M],decls:23,vars:6,consts:[[1,"container"],[1,"title"],[1,"example-form",3,"ngSubmit","formGroup"],[1,"example-full-width"],["type","email","matInput","","formControlName","email","placeholder","Enter your email"],["type","password","matInput","","formControlName","password","placeholder","Enter your password"],["type","submit",3,"disabled"],[1,"bottom"],[3,"routerLink"]],template:function(m,s){m&1&&(n(0,"div",0)(1,"div",1),a(2,"SignIn"),o(),n(3,"form",2),y("ngSubmit",function(){return s.signIn()}),n(4,"mat-form-field",3)(5,"mat-label"),a(6,"Email"),o(),w(7,"input",4)(8,"br"),b(9,Y,2,2),o(),n(10,"mat-form-field",3),w(11,"input",5),b(12,Z,4,0,"mat-error"),o(),w(13,"br"),n(14,"button",6),a(15,"SignIn"),o()(),n(16,"div",7)(17,"p"),a(18,"------OR------"),o(),n(19,"span"),a(20,"Create an Account ? \xA0 "),o(),n(21,"a",8),a(22,"Sign Up"),o()()()),m&2&&(d(3),_("formGroup",s.form),d(6),g(s.email.invalid&&s.email.touched&&s.email.dirty?9:-1),d(3),g(s.password.errors!=null&&s.password.errors.required?12:-1),d(2),_("disabled",s.form.invalid),d(7),_("routerLink",E(5,Q)))},dependencies:[A,j,N,D,T,q,U,k,V,L,R,G,B,z],styles:[".title[_ngcontent-%COMP%]{font-size:30px;color:#fff;margin-left:130px;margin-top:50px}.example-form[_ngcontent-%COMP%]{min-width:100px;max-width:400px;width:100%;margin-top:20%;border-radius:15px}.example-full-width[_ngcontent-%COMP%]{width:100%}.container[_ngcontent-%COMP%]{width:420px;height:650px;border:1px solid;border-radius:15px;justify-content:center;align-items:center;padding:10px;background-color:#057e9a;margin-left:35%;margin-top:50px}button[_ngcontent-%COMP%]{margin-top:70px;margin-bottom:30px;width:100px;height:30px;border-radius:8px;font-size:18px;margin-left:130px}.bottom[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-left:130px}.bottom[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:70px}"]});let t=l;return t})();export{ge as SignInComponent};
